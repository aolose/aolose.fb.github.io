webpackJsonp([0],{11:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={required:n(88),whitespace:n(126),type:n(125),range:n(124),enum:n(122),pattern:n(123)},e.exports=t.default},118:function(e,t,n){"use strict";function r(){(0,a.init)(".container")}n(325);var a=n(141);document.addEventListener("DOMContentLoaded",r)},120:function(e,t,n){"use strict";function r(e){this.rules=null,this._messages=l.messages,this.define(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(8),u=n(132),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=n(121),f=n(11);r.prototype={messages:function(e){return e&&(this._messages=(0,o.deepMerge)((0,l.newMessages)(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==(void 0===e?"undefined":i(e))||Array.isArray(e))throw new Error("Rules must be an object");this.rules={};var t=void 0,n=void 0;for(t in e)e.hasOwnProperty(t)&&(n=e[t],this.rules[t]=Array.isArray(n)?n:[n])},validate:function(e){function t(e){var t=void 0,n=void 0,r=[],a={};for(t=0;t<e.length;t++)!function(e){Array.isArray(e)?r=r.concat.apply(r,e):r.push(e)}(e[t]);if(r.length)for(t=0;t<r.length;t++)n=r[t].field,a[n]=a[n]||[],a[n].push(r[t]);else r=null,a=null;p(r,a)}var n=this,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments[2],c=e,d=u,p=s;if("function"==typeof d&&(p=d,d={}),!this.rules||0===Object.keys(this.rules).length)return void(p&&p());if(d.messages){var y=this.messages();y===l.messages&&(y=(0,l.newMessages)()),(0,o.deepMerge)(y,d.messages),d.messages=y}else d.messages=this.messages();d.error=f.error;var m=void 0,v=void 0,g={};(d.keys||Object.keys(this.rules)).forEach(function(t){m=n.rules[t],v=c[t],m.forEach(function(r){var i=r;"function"==typeof i.transform&&(c===e&&(c=a({},c)),v=c[t]=i.transform(v)),i="function"==typeof i?{validator:i}:a({},i),i.validator=n.getValidationMethod(i),i.field=t,i.fullField=i.fullField||t,i.type=n.getType(i),i.validator&&(g[t]=g[t]||[],g[t].push({rule:i,value:v,source:c,field:t}))})});var b={};(0,o.asyncMap)(g,d,function(e,t){function n(e,t){return a({},t,{fullField:s.fullField+"."+e})}function u(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=i;if(Array.isArray(u)||(u=[u]),u.length&&(0,o.warning)("async-validator:",u),u.length&&s.message&&(u=[].concat(s.message)),u=u.map((0,o.complementError)(s)),(d.first||d.fieldFirst)&&u.length)return b[s.field]=1,t(u);if(l){if(s.required&&!e.value)return u=s.message?[].concat(s.message).map((0,o.complementError)(s)):[d.error(s,(0,o.format)(d.messages.required,s.field))],t(u);var f={};if(s.defaultField)for(var c in e.value)e.value.hasOwnProperty(c)&&(f[c]=s.defaultField);f=a({},f,e.rule.fields);for(var p in f)if(f.hasOwnProperty(p)){var y=Array.isArray(f[p])?f[p]:[f[p]];f[p]=y.map(n.bind(null,p))}var m=new r(f);m.messages(d.messages),e.rule.options&&(e.rule.options.messages=d.messages,e.rule.options.error=d.error),m.validate(e.value,e.rule.options||d,function(e){t(e&&e.length?u.concat(e):e)})}else t(u)}var s=e.rule,l=!("object"!==s.type&&"array"!==s.type||"object"!==i(s.fields)&&"object"!==i(s.defaultField));l=l&&(s.required||!s.required&&e.value),s.field=e.field,s.validator(s,e.value,u,e.source,d)},function(e){t(e)})},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!s.default.hasOwnProperty(e.type))throw new Error((0,o.format)("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?s.default.required:s.default[this.getType(e)]||!1}},r.register=function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");s.default[e]=t},r.messages=l.messages,t.default=r,e.exports=t.default},121:function(e,t,n){"use strict";function r(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}Object.defineProperty(t,"__esModule",{value:!0}),t.newMessages=r;t.messages=r()},122:function(e,t,n){"use strict";function r(e,t,n,r,a){e[o]=Array.isArray(e[o])?e[o]:[],-1===e[o].indexOf(t)&&r.push(i.format(a.messages[o],e.fullField,e[o].join(", ")))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),o="enum";t.default=r,e.exports=t.default},123:function(e,t,n){"use strict";function r(e,t,n,r,a){e.pattern instanceof RegExp&&(e.pattern.test(t)||r.push(i.format(a.messages.pattern.mismatch,e.fullField,t,e.pattern)))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a);t.default=r,e.exports=t.default},124:function(e,t,n){"use strict";function r(e,t,n,r,a){var o="number"==typeof e.len,u="number"==typeof e.min,s="number"==typeof e.max,l=t,f=null,c="number"==typeof t,d="string"==typeof t,p=Array.isArray(t);if(c?f="number":d?f="string":p&&(f="array"),!f)return!1;(d||p)&&(l=t.length),o?l!==e.len&&r.push(i.format(a.messages[f].len,e.fullField,e.len)):u&&!s&&l<e.min?r.push(i.format(a.messages[f].min,e.fullField,e.min)):s&&!u&&l>e.max?r.push(i.format(a.messages[f].max,e.fullField,e.max)):u&&s&&(l<e.min||l>e.max)&&r.push(i.format(a.messages[f].range,e.fullField,e.min,e.max))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a);t.default=r,e.exports=t.default},125:function(e,t,n){"use strict";function r(e,t,n,r,i){if(e.required&&void 0===t)return void(0,s.default)(e,t,n,r,i);var u=["integer","float","array","regexp","object","method","email","number","date","url","hex"],l=e.type;u.indexOf(l)>-1?f[l](t)||r.push(o.format(i.messages.types[l],e.fullField,e.type)):l&&(void 0===t?"undefined":a(t))!==e.type&&r.push(o.format(i.messages.types[l],e.fullField,e.type))}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(8),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),u=n(88),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},f={integer:function(e){return f.number(e)&&parseInt(e,10)===e},float:function(e){return f.number(e)&&!f.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(e){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"===(void 0===e?"undefined":a(e))&&!f.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&!!e.match(l.email)},url:function(e){return"string"==typeof e&&!!e.match(l.url)},hex:function(e){return"string"==typeof e&&!!e.match(l.hex)}};t.default=r,e.exports=t.default},126:function(e,t,n){"use strict";function r(e,t,n,r,a){(/^\s+$/.test(t)||""===t)&&r.push(i.format(a.messages.whitespace,e.fullField))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a);t.default=r,e.exports=t.default},127:function(e,t,n){"use strict";function r(e,t,n,r,a){var u=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,o.isEmptyValue)(t,"array")&&!e.required)return n();i.default.required(e,t,r,u,a,"array"),(0,o.isEmptyValue)(t,"array")||(i.default.type(e,t,r,u,a),i.default.range(e,t,r,u,a))}n(u)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(8);t.default=r,e.exports=t.default},128:function(e,t,n){"use strict";function r(e,t,n,r,i){var u=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,a.isEmptyValue)(t)&&!e.required)return n();o.default.required(e,t,r,u,i),void 0!==t&&o.default.type(e,t,r,u,i)}n(u)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),i=n(11),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r,e.exports=t.default},129:function(e,t,n){"use strict";function r(e,t,n,r,a){var u=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,o.isEmptyValue)(t)&&!e.required)return n();i.default.required(e,t,r,u,a),(0,o.isEmptyValue)(t)||(i.default.type(e,t,r,u,a),t&&i.default.range(e,t.getTime(),r,u,a))}n(u)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(8);t.default=r,e.exports=t.default},130:function(e,t,n){"use strict";function r(e,t,n,r,a){var s=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,o.isEmptyValue)(t)&&!e.required)return n();i.default.required(e,t,r,s,a),t&&i.default[u](e,t,r,s,a)}n(s)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(8),u="enum";t.default=r,e.exports=t.default},131:function(e,t,n){"use strict";function r(e,t,n,r,a){var u=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,o.isEmptyValue)(t)&&!e.required)return n();i.default.required(e,t,r,u,a),void 0!==t&&(i.default.type(e,t,r,u,a),i.default.range(e,t,r,u,a))}n(u)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(8);t.default=r,e.exports=t.default},132:function(e,t,n){"use strict";e.exports={string:n(140),method:n(134),number:n(135),boolean:n(128),regexp:n(138),integer:n(133),float:n(131),array:n(127),object:n(136),enum:n(130),pattern:n(137),email:n(61),url:n(61),date:n(129),hex:n(61),required:n(139)}},133:function(e,t,n){"use strict";function r(e,t,n,r,a){var u=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,o.isEmptyValue)(t)&&!e.required)return n();i.default.required(e,t,r,u,a),void 0!==t&&(i.default.type(e,t,r,u,a),i.default.range(e,t,r,u,a))}n(u)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(8);t.default=r,e.exports=t.default},134:function(e,t,n){"use strict";function r(e,t,n,r,a){var u=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,o.isEmptyValue)(t)&&!e.required)return n();i.default.required(e,t,r,u,a),void 0!==t&&i.default.type(e,t,r,u,a)}n(u)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(8);t.default=r,e.exports=t.default},135:function(e,t,n){"use strict";function r(e,t,n,r,a){var u=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,o.isEmptyValue)(t)&&!e.required)return n();i.default.required(e,t,r,u,a),void 0!==t&&(i.default.type(e,t,r,u,a),i.default.range(e,t,r,u,a))}n(u)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(8);t.default=r,e.exports=t.default},136:function(e,t,n){"use strict";function r(e,t,n,r,a){var u=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,o.isEmptyValue)(t)&&!e.required)return n();i.default.required(e,t,r,u,a),void 0!==t&&i.default.type(e,t,r,u,a)}n(u)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(8);t.default=r,e.exports=t.default},137:function(e,t,n){"use strict";function r(e,t,n,r,a){var u=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,o.isEmptyValue)(t,"string")&&!e.required)return n();i.default.required(e,t,r,u,a),(0,o.isEmptyValue)(t,"string")||i.default.pattern(e,t,r,u,a)}n(u)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(8);t.default=r,e.exports=t.default},138:function(e,t,n){"use strict";function r(e,t,n,r,a){var u=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,o.isEmptyValue)(t)&&!e.required)return n();i.default.required(e,t,r,u,a),(0,o.isEmptyValue)(t)||i.default.type(e,t,r,u,a)}n(u)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(8);t.default=r,e.exports=t.default},139:function(e,t,n){"use strict";function r(e,t,n,r,i){var u=[],s=Array.isArray(t)?"array":void 0===t?"undefined":a(t);o.default.required(e,t,r,u,i,s),n(u)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(11),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r,e.exports=t.default},140:function(e,t,n){"use strict";function r(e,t,n,r,a){var u=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,o.isEmptyValue)(t,"string")&&!e.required)return n();i.default.required(e,t,r,u,a,"string"),(0,o.isEmptyValue)(t,"string")||(i.default.type(e,t,r,u,a),i.default.range(e,t,r,u,a),i.default.pattern(e,t,r,u,a),!0===e.whitespace&&i.default.whitespace(e,t,r,u,a))}n(u)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(8);t.default=r,e.exports=t.default},141:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.splice(1),a=t[0];return r.forEach(function(e){return e&&a.appendChild(e)}),a}function i(e,t){var n=e.getBoundingClientRect(),r=n.top,a=n.left,i=t.y;return[t.x-a,i-r]}function o(e,t,n){t="number"==typeof t?t+"px":t,n="number"==typeof n?n+"px":n,e.transform="translate("+t+","+n+")"}function u(e){function t(){var e=M.d;if(e){var t=e.parentNode;return t&&t.removeChild(e),setTimeout(function(){e.clone.parentNode&&k.removeChild(e.clone)},0),delete M.d,delete M.t,delete M.p,delete M.sly,e}}function n(e){return Object.assign({width:"",height:"",lineHeight:"",color:"",textAlign:"",fontSize:""},e)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={label:n(),field:n(),box:{width:"",height:""}};return Object.assign(t.label,e.label),Object.assign(t.field,e.field),Object.assign(t.box,e.box),t}function f(){return"x_"+parseInt(1e4*(Date.now()+Math.random())).toString(36)}function d(e,t,n){var r=e.key,i=JSON.parse(JSON.stringify(x[r]));i.name=i.name||f(),Object.keys(e).forEach(function(t){t!==r&&(t in i?i[t]=e[t]:delete i[t])}),Object.assign(e,i);var o=e.layout;o=void 0===o?{}:o;var u=o.label,s=void 0===u?{}:u,l=o.field,d=void 0===l?{}:l,p="area"===e.type,v=y("label"),g=m(),b=y(p?"textarea":"input");switch(Object.assign(v.style,s),v.textContent=i.label||"labelText",e.required&&(v.className=c.rq),r){case"input":return!p&&(b.type=e.type||"text"),b.name=e.name,Object.assign(b.style,d),console.log("validator",t),t&&t.rules&&(b.onblur=b.onchange=function(){var r={};r[e.name]=b.value,t.validate(r,function(t){var r=(t||[])[0]||{},a=r.message,i=void 0===a?"":a;b.className=t?c.errF:"",n.textContent=i?e.label+i:""})}),a(g,v,b);case"checkBox":return b.type=e.type,a(g,b,v)}}function v(e,n){var r=y("div");r.className=c.err;var o={};"object"===(void 0===e?"undefined":l(e))?o=e:o.key=e;var u=Object.assign(y("div"),{className:c["fm-item"]},n?{}:{draggable:!0,ondragend:t,ondragstart:function(e){e.dataTransfer.setDragImage(new Image,0,0),M.d=this,M.p=[e.x,e.y],M.sly=this.style,M.t=i(M,e)}});return Object.assign(u.style,(o.layout||{}).box),a(u,d(o,n,r),r),n||(u.err=r,u.cfg=o,u.redraw=function(){u.innerHTML="",Object.assign(u.style,(o.layout||{}).box),a(u,d(o),r)},u.onclick=function(e){M.act&&M.act.classList.remove(c.act),(M.act=u).classList.add(c.act),e.stopPropagation(),E.loadField(u)}),u}function g(e){Object.assign(e,{ondragover:function(t){t.preventDefault();var n=e.offsetTop,r=e.offsetLeft,a=e.offsetWidth,i=e.offsetHeight,o=M.p,u=M.t,s=t.x,l=t.y,f=(s-o[0]+u[0]-r)/a,c=(l-o[1]+u[1]-n)/i;e.insertAdjacentElement(f>c&&f>.5||f<c&&c>.5?"afterend":"beforebegin",M.d.clone)}}),e.classList.remove(c.abs),e.style.transform="",e.clone.parentNode?k.replaceChild(e,e.clone):k.appendChild(e)}function b(){return[].map.call(k.childNodes,function(e){return e.cfg})}function h(e){var t={};return e.forEach(function(e){var n=Object.assign({},e),r=n.name;delete n.name,t[r]=n.valid,n.required&&t[r].unshift({required:!0,message:(n.label||"")+"不能为空"})}),new p.default(t)}function _(){var e=Object.assign(y("div"),{className:c.mask,onclick:function(){this.style.opacity=0,setTimeout(function(t){return e.parentNode.removeChild(e)},300)}}),t=y("form");t.onclick=function(e){return e.stopPropagation()},t.className=c.testFm+" "+c.form;var n=b(),r=h(n);n.forEach(function(e){return t.appendChild(v(e,r))}),a(I,a(e,t)),setTimeout(function(t){return e.style.opacity=1},300)}var x={form:{action:""},input:{label:"",type:"text",name:"",layout:u(),valid:[]},checkBox:{label:"",type:"checkbox",name:"",valid:[],layout:u(),list:[]},text:{},img:{},button:{},file:{},drop:{}},O=["box","pages","workplace","tools","attrs","form"].map(function(e){return Object.assign(y("div"),{className:c[e]})}),j=s(O,6),w=j[0],q=j[1],M=j[2],P=j[3],E=j[4],k=j[5];M.ondragover=function(e){var t=M.sly,n=M.p,r=M.t;o(t,e.x-n[0]+r[0],e.y-n[1]+r[1])},k.classList.add(c.design),Object.assign(k,{cfg:{key:"form"},onclick:function(){M.act&&M.act.classList.remove(c.act),(M.act=k).classList.add(c.act),E.loadField(k)},ondragover:function(e){e.preventDefault();var t=M.d.classList;t.contains(c.abs)||(t.add(c.abs),M.appendChild(M.d))},ondrop:function(e){g(t())}}),a.apply(null,[P].concat([["输入框","&#xe601;","input"],["单选/多选","&#xe731;","checkBox"]].map(function(e){return a(Object.assign(y("div"),{className:c.item,draggable:!0,ondragend:t,ondragstart:function(t){t.dataTransfer.setDragImage(new Image,0,0);var n=M.d=v(e[2]);(n.clone=n.cloneNode(!0)).classList.add(c.clone),n.classList.add(c.abs),M.p=[t.x,t.y],o.apply(void 0,[M.sly=n.style].concat(r(M.t=i(M,t)))),M.appendChild(n)}}),a(Object.assign(y("div"),{className:c.itemBox}),Object.assign(y("span"),{innerHTML:e[1],className:c.icon}),Object.assign(y("span"),{textContent:e[0]})))})));var N=y("div"),S=y("div"),A=y("div"),C=y("div"),F=y("div"),V=y("div"),T=y("div"),L=N.style,B=T.style;F.textContent="数据",V.textContent="外观",V.onclick=function(e){return o(L,"-50%",0)||o(B,"100%",0)},F.onclick=function(e){return o(L,"0",0)||o(B,"0",0)},N.className=c.panelBox,T.className=c.tabAct,S.className=A.className=c.panel,C.className=c.tabs,F.className=V.className=c.tab,E.loadField=function(e){function t(e){for(var t=y("select"),n=0,r=e.length;n<r;n++){var a=e[n];t.appendChild(Object.assign(y("option"),{value:a[0],textContent:a[1]}))}return t}function n(t,n,r,a,i){var u="area"===a,s=y(u?"textarea":"input");return void 0!==n&&(s.value=n),s.placeholder=r||"",!u&&(s.type=a||"text"),s.onblur=function(n){"function"==typeof t?t(o,s.value):o[t]=s.value,k!==e&&e.redraw(),i&&E.loadField(e)},s}function r(e,t){var n=y("div"),r=y("label");return r.textContent=e,n.className=c.attrF,n.ff=t,a(n,r,t)}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return Object.assign(y("h"+t),{textContent:e})}A.innerHTML=S.innerHTML="";var o=e.cfg,u=o.layout;u=void 0===u?{}:u;var s=u.label,l=void 0===s?{}:s,f=u.field,d=void 0===f?{}:f,p=u.box,v=void 0===p?{}:p;switch(o.key){case"form":a(S,r("接口地址:",n("action",o.action)));break;case"input":a(S,r("标签名称:",n("label",o.label))),a(S,r("输入框类型:",function(n,r,a,i){var u=t(r);return void 0!==a&&(u.value=a),u.onchange=function(t){"function"==typeof n?n(o,u.value):o[n]=u.value,e.redraw(),i&&E.loadField(e)},u}("type",[["text","文本"],["area","多行文本"]],o.type,!0))),a(S,r("数据字段:",n("name",o.name))),a(S,function(n){function i(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";Object.assign(m.appendChild(b).ff,{k:e,type:t,value:f[e]||"",onchange:function(){f[e]=this.value}})}function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){return e.parentNode&&m.removeChild(e)})}function o(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.keys(e).forEach(function(t){return-1===n.indexOf(t)&&delete e[t]}),e}function u(){f.hasOwnProperty("pattern")?(v.value="pattern",i(g,x),e("pattern")):f.hasOwnProperty("min")||f.hasOwnProperty("max")?(v.value="pattern",i(b,g),m.appendChild(x.setV(f.min,f.max))):f.hasOwnProperty("length")?(v.value="length",i(x,g),e("length","number")):(v.value="type",a(m,g),"enum"===(v.value=f.type)?(e("type"),i(x)):i(b,x))}function s(){this===h?f.min=this.value:this===_&&(f.max=this.value)}function l(){return Object.assign(y("input"),{className:c.rIpt,type:"number",onchange:s})}var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=Object.assign(y("div"),{textContent:"X",className:c.close,onclick:function(e){e.stopPropagation(),m.parentNode.removeChild(m);var t=p.indexOf(f);t>-1&&p.splice(t,1)}}),p=n.valid,m=Object.assign(y("div"),{className:c.validator});m.v=f,-1===p.indexOf(f)&&f&&p.push(f),m.appendChild(d);var v=m.appendChild(r("规则:",Object.assign(t([["type","类型"],["pattern","正则表达式"],["range","范围"],["length","长度"]]),{onchange:function(){switch(this.value){case"type":f.type="string";break;case"pattern":o(f,"pattern"),f.pattern="";break;case"range":o(f,"max","min"),f.min=f.max="";break;case"length":o(f,"length"),f.length=""}u()}})));m.appendChild(r("错误提示:",Object.assign(y("input"),{type:"text",onchange:function(){f.message=this.value},value:f.message||""})));var g=r("类型:",Object.assign(t([["string","文本"],["number","数值"],["boolean","布尔"],["enum","枚举"],["regexp","正则表达式"],["integer","整数"],["float","浮点数"],["array","数组"],["date","日期"],["url","链接"],["hex","十六进制数"],["email","邮箱"]]),{onchange:function(){var e=this.value;"enum"===e?o(f,"type","enum"):o(f,"type"),f.type=e,u()}})),b=r("值:",Object(y("input"),{type:"text"})),h=l(),_=l(),x=r("值:",a(Object.assign(y("div"),{className:c.range}),Object.assign(y("span"),{textContent:"min"}),h,document.createTextNode("-"),Object.assign(y("span"),{textContent:"max"}),_));return x.setV=function(e,t){return h.value=e||0,_.value=t||0,x},u(),m}var o=Object.assign(y("input"),{type:"checkbox",checked:!!n.required,onchange:function(){n.required=this.checked,e.redraw()}});Array.isArray(n.valid)||(n.valid=[]);var u=m(),s=Object.assign(y("div"),{className:c.rules}),l=Object.assign(y("span"),{textContent:"添加校验规则",onclick:function(){a(s,i())},className:c.addRule});return a(u,r("非空:",o),l,s),n.valid.forEach(function(e){return s.appendChild(i(e))}),u}(o));break;case"checkBox":a(S,r("标签名称:",n("label",o.label))),a(S,r("数据字段:",n("name",o.name)))}a(A,i("外框:")),Object.keys(v).forEach(function(e){return a(A,r(e,n(function(t,n){(t.layout=t.layout||{}).box=v,v[e]=n},v[e])))}),a(A,i("标签:")),Object.keys(l).forEach(function(e){return a(A,r(e,n(function(t,n){(t.layout=t.layout||{}).label=l,l[e]=n},l[e])))}),a(A,i("内容:")),Object.keys(d).forEach(function(e){return a(A,r(e,n(function(t,n){(t.layout=t.layout||{}).field=d,d[e]=n},d[e])))})};var I=a(document.querySelector(e),a(w,a(q,Object.assign(y("button"),{textContent:"显示当前数据",onclick:function(){alert(JSON.stringify(b()))}}),Object.assign(y("button"),{textContent:"表单测试",onclick:_})),a(M,k,P),a(E,a(C,a(F,T),V),a(N,S,A))))}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.init=u;var f=n(324),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),d=n(120),p=function(e){return e&&e.__esModule?e:{default:e}}(d),y=document.createElement.bind(document),m=document.createDocumentFragment.bind(document)},324:function(e,t){e.exports={abs:"index__abs",box:"index__box",pages:"index__pages",workplace:"index__workplace",attrF:"index__attrF",tools:"index__tools",attrs:"index__attrs",form:"index__form",act:"index__act",itemBox:"index__itemBox",icon:"index__icon",item:"index__item","fm-item":"index__fm-item",design:"index__design",tabs:"index__tabs",rq:"index__rq",tab:"index__tab",panelBox:"index__panelBox",err:"index__err",panel:"index__panel",tabAct:"index__tabAct",rIpt:"index__rIpt",validator:"index__validator",rules:"index__rules",addRule:"index__addRule",close:"index__close",clone:"index__clone",errF:"index__errF",mask:"index__mask",testFm:"index__testFm"}},325:function(e,t){},327:function(e,t,n){e.exports=n(118)},61:function(e,t,n){"use strict";function r(e,t,n,r,a){var u=e.type,s=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((0,o.isEmptyValue)(t,u)&&!e.required)return n();i.default.required(e,t,r,s,a,u),(0,o.isEmptyValue)(t,u)||i.default.type(e,t,r,s,a)}n(s)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n(8);t.default=r,e.exports=t.default},8:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=1,a=t[0],i=t.length;if("function"==typeof a)return a.apply(null,t.slice(1));if("string"==typeof a){for(var o=String(a).replace(m,function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch(e){return"[Circular]"}break;default:return e}}),u=t[r];r<i;u=t[++r])o+=" "+u;return o}return a}function a(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"pattern"===e}function i(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!a(t)||"string"!=typeof e||e))}function o(e){return 0===Object.keys(e).length}function u(e,t,n){function r(e){a.push.apply(a,e),++i===o&&n(a)}var a=[],i=0,o=e.length;e.forEach(function(e){t(e,r)})}function s(e,t,n){function r(o){if(o&&o.length)return void n(o);var u=a;a+=1,u<i?t(e[u],r):n([])}var a=0,i=e.length;r([])}function l(e){var t=[];return Object.keys(e).forEach(function(n){t.push.apply(t,e[n])}),t}function f(e,t,n,r){if(t.first){return s(l(e),n,r)}var a=t.firstFields||[];!0===a&&(a=Object.keys(e));var i=Object.keys(e),o=i.length,f=0,c=[],d=function(e){c.push.apply(c,e),++f===o&&r(c)};i.forEach(function(t){var r=e[t];-1!==a.indexOf(t)?s(r,n,d):u(r,n,d)})}function c(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:t,field:t.field||e.fullField}}}function d(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"===(void 0===r?"undefined":y(r))&&"object"===y(e[n])?e[n]=p({},e[n],r):e[n]=r}return e}Object.defineProperty(t,"__esModule",{value:!0});var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.format=r,t.isEmptyValue=i,t.isEmptyObject=o,t.asyncMap=f,t.complementError=c,t.deepMerge=d;var m=/%[sdj%]/g;t.warning=function(){}},88:function(e,t,n){"use strict";function r(e,t,n,r,a,o){!e.required||n.hasOwnProperty(e.field)&&!i.isEmptyValue(t,o||e.type)||r.push(i.format(a.messages.required,e.fullField))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a);t.default=r,e.exports=t.default}},[327]);
//# sourceMappingURL=app-f1544820043658cbe9eb.map